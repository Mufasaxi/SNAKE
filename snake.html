<html>
<canvas id = "canvas" width  = "500" height  = "500"></canvas>
<script>
var canvas;
var canvasContext;
var snake = [];
snake[0] = {x : 250, y : 250};	
var unit  = 10;
var snakeX = snake[0].x;
var snakeY =  snake[0].y
var speedX = 0;
var speedY = 0;
//var test = Math.round((Math.random()*(500-0)+0)/10)*10;
var food = {};
window.onload = function(){

	canvas =  document.getElementById("canvas");
	canvasContext = canvas.getContext("2d");
	setInterval(function(){
		draw();
		game();}
		,1000/15
	);
	food = {
	x : Math.round(Math.random() * (canvas.width/unit))*unit 
	,y : Math.round(Math.random() * (canvas.height/unit))*unit
	};
	
	document.addEventListener("keydown", keyPush);


	//console.log(food.x);
	//console.log(food.y);
}


function keyPush(event){

	switch (event.keyCode){
		case 37:
			speedX = -unit;
			speedY = 0;
			break;
		case 38:
			speedX = 0;
			speedY = -unit;
			break;
		case 39:
			speedX = unit;
			speedY = 0
			break;
		case 40:
			speedX = 0;
			speedY = unit;
			break;	
	}
}


function draw(){

	canvasContext.fillStyle = "black";
	canvasContext.fillRect(0, 0, canvas.width, canvas.height);
	canvasContext.fillStyle = "red";
	canvasContext.fillRect(food.x, food.y, unit, unit);
	for (var i = 0 ; i < snake.length; i++) {
		canvasContext.fillStyle = "white";
		canvasContext.fillRect(snake[i].x, snake[i].y, unit, unit);
		
	}

}


function game(){
	if (collision() === true){
		canvasContext.fillText("GAME OVER", canvas.width/2, canvas.height/2 );
		return true;
	}
	

	snakeX += speedX;
	snakeY += speedY;
	if (snakeX < 0){
		snakeX  =  canvas.width -1;
	}
	if (snakeX > canvas.width - 1){
		snakeX = 0;
	}	
	if (snakeY < 0){
		snakeY  =  canvas.height -1;
	}
	if (snakeY> canvas.height - 1){
		snakeY = 0;
	}
	let newHead = {x : snakeX , y : snakeY};
	if (snakeX == food.x && snakeY == food.y){
		food = {
			x : Math.round(Math.random() * (canvas.width/unit))*unit 
			,y : Math.round(Math.random() * (canvas.height/unit))*unit
		};
		/*for (var i = 0 ; i < snake.length; i++){
			console.log(snake[i]);
		}*/	
		
	} else {
		snake.pop();
	
	}
	
	snake.unshift(newHead);
	
	


}


function collision() {

	for (var i = 1; i < snake.length; i++){
	
		if (snake[0].x ==  snake[i].x && snake[0].y == snake[i].y ){
		
			return true;
		
		} 
	
	}
	

}










</script>
</html>