<html>
<canvas id = "canvas" width  = "500" height  = "500"></canvas>
<script>
var canvas;
var canvasContext;
/*var snake = {
	x : 250,
	y : 250,
	};*/
var snake = [];
snake[0] = {x : 250, y : 250};	
var unit  = 10;
var snakeX = snake[0].x;
var snakeY =  snake[0].y
var speedX = 0;
var speedY = 0;
var test = Math.round((Math.random()*(500-0)+0)/10)*10;
var food = {};
window.onload = function(){

	canvas =  document.getElementById("canvas");
	canvasContext = canvas.getContext("2d");
	setInterval(function(){
		draw();
		game();}
		,1000/15
	);
	food = {
	x : Math.round(Math.random() * (canvas.width/unit))*unit 
	,y : Math.round(Math.random() * (canvas.height/unit))*unit
	};
	
	document.addEventListener("keydown", keyPush);


	console.log(food.x);
	console.log(food.y);
}


function keyPush(event){

	switch (event.keyCode){
		case 37:
			speedX = -unit;
			speedY = 0;
			break;
		case 38:
			speedX = 0;
			speedY = -unit;
			break;
		case 39:
			speedX = unit;
			speedY = 0
			break;
		case 40:
			speedX = 0;
			speedY = unit;
			break;	
	}
}


function draw(){

	canvasContext.fillStyle = "black";
	canvasContext.fillRect(0, 0, canvas.width, canvas.height);
	canvasContext.fillStyle = "red";
	canvasContext.fillRect(food.x, food.y, unit, unit);
	for (var i = 0 ; i < snake.length; i++) {
		canvasContext.fillStyle = "white";
		canvasContext.fillRect(snake[i].x, snake[i].y, unit, unit);
		//snake.push({x : snake[i].x, y : snake[i].y});
	}

}


function game(){

	

	snake[0].x += speedX;
	snake[0].y += speedY;
	if (snake[0].x < 0){
		snake[0].x  =  canvas.width -1;
	}
	if (snake[0].x > canvas.width - 1){
		snake[0].x = 0;
	}
	if (snake[0].y < 0){
		snake[0].y  =  canvas.height -1;
	}
	if (snake[0].y > canvas.height - 1){
		snake[0].y = 0;
	}
	let newHead = {x : snakeX , y : snakeY};
	if (snakeX == food.x && snakeY == food.y){
		food = {
			x : Math.round(Math.random() * (canvas.width/unit))*unit 
			,y : Math.round(Math.random() * (canvas.height/unit))*unit
		};
		//snake.push({x : snake[0].x, y : snake[0].y});
		//snake.unshift({x : snake[0].x, y : snake[0].y});
		for (var i = 0 ; i < snake.length; i++){
			console.log(snake[i]);
		}	
		
	} else {
		snake.pop();
	
	}
	
	snake.unshift(newHead);
	
	/*let headX = snake[0].x;
	let headY = snake[0].y;
	let newHead = {x: headX, y: headY}

	if(headX == food.x && headY == food.y) {
		//create new food position
	 	food = {
			x : Math.floor(Math.random()*((cvsW/unit)-1)+1)*unit,
			y : Math.floor(Math.random()*((cvsH/unit)-1)+1)*unit
		}
	}
	else {
		//remove tail
		snake.pop();
	}

	//add head to snake
	snake.unshift(newHead);*/
	


}










</script>
</html>